(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{223:function(e,n,t){e.exports=t(550)},228:function(e,n,t){},25:function(e,n,t){e.exports={App:"_3HGgo8YmsRzzR-43XGuiVo",navbar:"gBnLqs9WpuhQyk5qcuBFE",brand:"_1ANlngfxtlZL_wfXyTiiOt",preview:"_1g_0nYQynQCg9NHI5earA",previewDashboard:"_2dc8blJjyeHHcxcYajKPbp","preview-html":"_2I0726fxMFLvUluQZyK_h2","preview-both":"_1XiMwV8qMU22Ph0eS3Pi0D","preview-code":"_8wfWpLf3i2rFaC1LnaJXO"}},48:function(e,n,t){e.exports={App:"_2MqrEPH7wRGTUnAVXplCQU",title:"_24SQRvaGQXqT_X5Wyx2Ndf",subtitle:"m60etY5PtB6SdZqnydOx6",button:"_36HiqEt255U7c_x1fj-oiL"}},548:function(e,n,t){},550:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),i=t(217),o=t.n(i),s=(t(228),t(71)),c=t(72),l=t(75),u=t(73),m=t(76),p=t(552),d=t(553),f=t(554),h=t(551),v=t(48),g=t.n(v);function b(){return a.a.createElement("div",{className:g.a.App},a.a.createElement("div",null,a.a.createElement("h1",{className:g.a.title},"Damu"),a.a.createElement("h2",{className:g.a.subtitle},"A React Compiler"),a.a.createElement(h.a,{to:"/repl"},a.a.createElement("button",{className:g.a.button},"REPL"))))}var y=t(555),E=t(218),x=t.n(E),w=t(115),S=t.n(w),C=(t(80),t(239),t(240),t(242),t(69)),N=t(74),D=t(219),M=t.n(D),k=t(70),O=t(0),_=t(24),j=A("function __damu__appendChildren(\n  parent,\n  children\n) {\n  children = Array.isArray(children) ? children : [children];\n  children.forEach(function(child) {\n    parent.appendChild(child);\n  });\n}"),R=A("function __damu__appendChildren(parent, children) {\n    children = Array.isArray(children) ? children : [children];\n    children.forEach(function(child) {\n      if (typeof child.render === 'function') {\n        child = child.render();\n      }\n      parent.appendChild(child);\n    });\n  }");function A(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Object(_.parseSync)(n.join("")).program.body[0]}var P={APPEND_CHILDREN:Symbol("__has_appendChildren__"),APPEND_COMPONENT:Symbol("__has_appendComponent__")};function I(e,n){(function(e){return e.findParent(function(e){return e.isProgram()})}(e))[n]=!0}var J={};function L(e,n){var t=J[e.node.type];if("function"===typeof t)return t(e,n);throw new Error("Unknown expression type: "+e.node.type)}function X(e,n){J[e]=n}function T(e,n){return O.variableDeclaration("const",[O.variableDeclarator(e,n)])}function U(e){return!("JSXText"===e.node.type&&""===e.node.value.trim())}function W(e,n,t){var r=n?Array.isArray(n)?n:[n]:[],a=t?Array.isArray(t)?t:[t]:[];return O.ifStatement(e,O.blockStatement(r),t?O.blockStatement(a):null)}X("ClassDeclaration",function(e){!function(e){e.get("superClass").remove();var n=e.get("body.body").find(function(e){return e.get("key").isIdentifier({name:"constructor"})});if(n){var t=n.get("body.body").find(function(e){return e.get("expression").isCallExpression()&&e.get("expression.callee").isSuper()});t&&t.remove()}}(e);var n={};e.traverse({MemberExpression:function(e){if(e.get("object").isThisExpression()&&e.get("property").isIdentifier({name:"setState"})){var t=e.parentPath.get("arguments.0");t.isObjectExpression()&&t.get("properties").forEach(function(t){var r=t.get("key.name").node;n[r]=n[r]||[],n[r].push(e.parentPath)})}}});var t=function(t){var r=e.scope.generateUidIdentifier("set"+t);e.get("body").pushContainer("body",O.classMethod("method",r,[O.identifier(t)],O.blockStatement([O.expressionStatement(O.assignmentExpression("=",O.memberExpression(O.thisExpression(),O.identifier(t)),O.identifier(t)))])));var a=n[t];a.forEach(function(e){var n=e.node;e.replaceWithMultiple(O.callExpression(O.memberExpression(O.thisExpression(),r),[n.arguments[0].properties[0].value]))})};for(var r in n)t(r);var a=e.get("body.body").find(function(e){return e.get("key").isIdentifier({name:"constructor"})});if(a){var i=a.get("body.body").find(function(e){var n=e.get("expression");return n.isAssignmentExpression()&&n.get("left").isMemberExpression()&&n.get("left.object").isThisExpression()&&n.get("left.property").isIdentifier({name:"state"})&&n.get("right").isObjectExpression()});i&&i.replaceWithMultiple(i.get("expression.right.properties").map(function(e){var n=e.node.key,t=e.node.value;return O.expressionStatement(O.assignmentExpression("=",O.memberExpression(O.thisExpression(),n),t))}))}});var q=["abort","blur","canplay","canplaythrough","cancel","change","click","close","compositionend","compositionstart","compositionupdate","contextmenu","copy","cut","dblclick","auxclick","drag","dragend","dragenter","dragexit","dragleave","dragover","dragstart","drop","durationchange","emptied","encrypted","ended","error","focus","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mousemove","mouseout","mouseover","mouseup","paste","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointermove","pointerout","pointerover","pointerup","progress","ratechange","reset","scroll","seeked","seeking","selectionchange","stalled","submit","suspend","textInput","timeupdate","toggle","touchcancel","touchend","touchmove","touchstart","animationend","animationiteration","animationstart","transitionend","volumechange","waiting","wheel"],F=new Map;function B(e,n,t){return O.expressionStatement(O.callExpression(O.memberExpression(e,O.identifier("setAttribute")),[O.stringLiteral(n),t]))}function H(e,n){return T(e,O.callExpression(O.memberExpression(O.identifier("document"),O.identifier("createTextNode")),[n]))}function G(e,n,t){return I(t,P.APPEND_CHILDREN),O.expressionStatement(O.callExpression(O.identifier("__damu__appendChildren"),[e,n]))}function Q(e,n){var t=e.scope.generateUidIdentifier("text"),r=[H(t,O.stringLiteral(e.node.value))];return n&&r.push(G(n,t,e)),{identifier:t,statements:r}}function z(e){return"BlockStatement"!==e.node.type&&e.replaceWith(O.blockStatement([O.returnStatement(e.node)])),e}function V(e,n){var t=e.node;return{identifier:t,statements:n?[G(n,t,e)]:[]}}F.set("className",function(e,n){return O.expressionStatement(O.assignmentExpression("=",O.memberExpression(e,O.identifier("className")),n))}),F.set("style",function(e,n){switch(n.type){case"ObjectExpression":return function(e,n){return n.properties.map(function(n){var t=n.key,r=n.value;return O.expressionStatement(O.assignmentExpression("=",O.memberExpression(O.memberExpression(e,O.identifier("style")),t),function(e){if("NumericLiteral"===e.type)return O.stringLiteral(e.value+"px");return e}(r)))})}(e,n);case"StringLiteral":return function(e,n){return B(e,"style",n)}(e,n)}}),F.set(/^on[A-Z]\S+$/,function(e,n,t){var r=!1,a=n.slice(2).toLowerCase();if(!q.includes(a)){if(!q.includes(a.replace("capture","")))return B(e,n,t);a=a.replace("capture",""),r=!0}return O.expressionStatement(O.callExpression(O.memberExpression(e,O.identifier("addEventListener")),[O.stringLiteral(a),t,r&&O.booleanLiteral(r)].filter(Boolean)))}),X("JSXElement",function(e,n){var t=function e(n){switch(n.type){case"JSXMemberExpression":return e(n.object)+"."+e(n.property);case"JSXIdentifier":return n.name;default:throw new Error("Unknown type: "+n.type)}}(e.node.openingElement.name),r=e.scope.generateUidIdentifier(t);if(/^[A-Z]/.test(t)){I(e,P.APPEND_COMPONENT);var a=[O.expressionStatement(O.assignmentExpression("=",r,O.newExpression(O.identifier(t),[])))];return{identifier:r,statements:a}}var i=[],o=function(e,n){return T(e,O.callExpression(O.memberExpression(O.identifier("document"),O.identifier("createElement")),[O.stringLiteral(n)]))}(r,t);i.push(o),e.node.openingElement.attributes.map(function(e){return function(e,n,t,r){var a="JSXExpressionContainer"===t.type?t.expression:t,i=!0,o=!1,s=void 0;try{for(var c,l=F.keys()[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value;if("string"===typeof u&&n===u)return F.get(u)(e,a);if("function"===typeof u.test&&u.test(n))return F.get(u)(e,n,a)}}catch(m){o=!0,s=m}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}return B(e,n,a)}(r,e.name.name,e.value)}).forEach(function(e){return i.push(e)}),e.get("children").filter(U).map(function(e){return L(e,r)}).map(function(e){var n=e.statements;return n}).forEach(function(e){return i.push.apply(i,Object(N.a)(e))}),n&&i.push(G(n,r,e));return{identifier:r,statements:i}}),X("JSXText",Q),X("StringLiteral",Q),X("JSXExpressionContainer",function(e,n){return L(e.get("expression"),n)}),X("BinaryExpression",function(e,n){var t=e.scope.generateUidIdentifier("result"),r=[H(t,e.node)];n&&r.push(G(n,t,e));return{identifier:t,statements:r}}),X("CallExpression",function(e,n){if(function(e){return e.has("callee")&&e.get("callee").isMemberExpression()&&e.get("callee.property").isIdentifier({name:"map"})&&e.has("arguments")&&1===e.get("arguments").length&&(e.get("arguments.0").isArrowFunctionExpression()||e.get("arguments.0").isFunctionExpression())}(e))return function(e,n){if(z(e.get("arguments.0.body")),n){e.get("callee.property").replaceWith(O.identifier("forEach"));var t=e.get("arguments.0.body.body"),r=t.find(function(e){return e.isReturnStatement()});r&&r.replaceWith(G(n,r.node.argument,e));var a=[O.expressionStatement(e.node)];return{identifier:null,statements:a}}var i=e.scope.generateUidIdentifier("lists"),o=[T(i,e.node)];return{identifier:i,statements:o}}(e,n);var t=e.scope.generateUidIdentifier("result"),r=[T(t,e.node)];n&&r.push(G(n,t,e));return{identifier:t,statements:r}}),X("LogicalExpression",function(e,n){switch(e.node.operator){case"&&":return function(e,n){var t=e.scope.generateUidIdentifier("result"),r=L(e.get("right"),n),a=[W(e.node.left,r.statements)];return{identifier:t,statements:a}}(e,n);case"||":return function(e,n){var t=e.scope.generateUidIdentifier("result"),r=L(e.get("left"),n),a=L(e.get("right"),n),i=[W(e.node.left,r.statements,a.statements)];return{identifier:t,statements:i}}(e,n)}throw new Error("Unknown logical operator: "+e.node.operator)}),X("ConditionalExpression",function(e,n){var t=e.scope.generateUidIdentifier("result"),r=L(e.get("consequent"),n),a=L(e.get("alternate"),n),i=[W(e.node.test,r.statements,a.statements)];return{identifier:t,statements:i}}),X("Identifier",V),X("MemberExpression",V);var Y=Object(k.declare)(function(e,n){return e.assertVersion(7),{name:"babel-transform-damu-plugin",inherits:M.a,visitor:{JSXElement:function(e){var n=L(e),t=n.identifier,r=n.statements;e.replaceWith(t),r.forEach(function(n){Z(e,n)})},JSXFragment:function(e){var n,t=e.get("children").filter(U).map(function(e){return L(e)}).reduce(function(e,n){var t,r=n.identifier,a=n.statements;return e.identifiers.push(r),(t=e.statements).push.apply(t,Object(N.a)(a)),e},{identifiers:[],statements:[]}),r=t.identifiers,a=t.statements;e.replaceWith((n=r,O.arrayExpression(n))),a.forEach(function(n){Z(e,n)})},CallExpression:{enter:function(e){e.has("arguments.0.type")&&["ArrowFunctionExpression","FunctionExpression"].includes(e.get("arguments.0.type").node)&&z(e.get("arguments.0.body"))},exit:function(e){if(function(e){return e.has("callee")&&e.get("callee").isMemberExpression()&&e.get("callee.object").isIdentifier({name:"ReactDOM"})&&e.get("callee.property").isIdentifier({name:"render"})}(e)){var n=e.node.arguments,t=n[0],r=n[1];e.replaceWith(G(r,t,e))}}},ImportDeclaration:function(e){["react","react-dom"].includes(e.node.source.value)&&e.remove()},ClassDeclaration:function(e){e.has("superClass")&&(e.get("superClass").isMemberExpression()&&e.get("superClass.object").isIdentifier({name:"React"})&&e.get("superClass.property").isIdentifier({name:"Component"})||e.get("superClass").isIdentifier({name:"Component "}))&&L(e)},Program:{exit:function(e){[e.scope.bindings.React,e.scope.bindings.ReactDOM].forEach(function(e){e&&e.path.remove()}),e[P.APPEND_CHILDREN]&&(e[P.APPEND_COMPONENT]?e.pushContainer("body",R):e.pushContainer("body",j))}}}}});function Z(e,n){var t=e.scope.path;switch(t.node.type){case"ArrowFunctionExpression":case"FunctionExpression":case"FunctionDeclaration":case"ClassMethod":t=t.get("body")}for(var r=t.get("body"),a=e;a&&!r.includes(a);)a=a.parentPath;a?a.insertBefore(n):t.unshiftContainer("body",n)}var $=t(220),K=t.n($),ee=t(79),ne=t.n(ee),te=t(25),re=t.n(te),ae=Object.keys(ne.a),ie={$blockScrolling:!0},oe={useWorker:!1};function se(e){return e=decodeURIComponent(e.slice(1)),ae.includes(e)?e:"01 simple"}var ce=function(e){function n(e){var t;Object(s.a)(this,n),(t=Object(l.a)(this,Object(u.a)(n).call(this,e))).onChange=function(e){t.setState({value:e,error:null}),t.transpile(e)},t.onChangeTemplate=function(e){t.props.history.replace(t.props.location.pathname+"#"+e.currentTarget.value)},t.onChangeDemo=function(e){var n=ne.a[e];t.setState({selectedDemo:e,value:n,error:null}),t.transpile(n)},t.onPreviewModeChange=function(e){t.setState({previewMode:e.currentTarget.value})},t.transpile=function(e){C.transformAsync(e,{plugins:[K.a,Y]}).then(function(e){var n;if(t.setState({transpiled:(n=e.code,n.split("\n").filter(function(e){return""!==e.trim()}).map(function(e){return/^[\s\t]*(const|document|if|function)/.test(e)?"\n"+e:e}).join("\n").trim())}),t.iframe){for(;t.iframe.firstChild;)t.iframe.removeChild(t.iframe.firstChild);var r=document.createElement("iframe");t.iframe.appendChild(r);var a=r.contentDocument||r.contentWindow.document;a.open(),a.write(function(e){return'<html>\n    <body>\n      <div id="app" />\n    </body>\n    <script type="text/javascript">'.concat(e,"<\/script>\n  </html>")}(e.code)),a.close()}}).catch(function(e){if(console.error(e),t.setState({transpiled:"",error:e.message}),t.iframe)for(;t.iframe.firstChild;)t.iframe.removeChild(t.iframe.firstChild)})},t.onIframeRef=function(e){t.iframe=e};var r=se(e.location.hash);return t.state={value:ne.a[r],selectedDemo:r,transpiled:"",error:null,previewMode:"code"},t}return Object(m.a)(n,e),Object(c.a)(n,[{key:"componentDidMount",value:function(){this.transpile(this.state.value)}},{key:"componentDidUpdate",value:function(e){e.location.hash!==this.props.location.hash&&this.onChangeDemo(se(this.props.location.hash))}},{key:"render",value:function(){var e=this,n=this.state.previewMode;return a.a.createElement(x.a,{minWidth:600},function(t){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:re.a.navbar},a.a.createElement(h.a,{to:"/",className:re.a.brand},"Damu"),a.a.createElement("label",null,"Demo: ",a.a.createElement("select",{onChange:e.onChangeTemplate,value:e.state.selectedDemo},ae.map(function(e){return a.a.createElement("option",{key:e,value:e},e)}))),a.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://github.com/tanhauhau/damu"},"View it on Github")),a.a.createElement("div",{className:re.a.App},a.a.createElement(S.a,{height:t?"calc(100vh - 50px)":"80vh",width:t?"50vw":"100vw",mode:"jsx",theme:"tomorrow",fontSize:14,onChange:e.onChange,showGutter:!0,name:"editor",value:e.state.value,editorProps:ie,tabSize:2,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,showLineNumbers:!0}),a.a.createElement("div",{className:re.a.preview+" "+re.a["preview-"+n]},a.a.createElement("div",{className:re.a.previewDashboard},a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement("input",{id:"both",value:"both",name:"preview-mode",type:"radio",checked:"both"===n,onChange:e.onPreviewModeChange}),"Both"),a.a.createElement("label",null,a.a.createElement("input",{id:"code",value:"code",name:"preview-mode",type:"radio",checked:"code"===n,onChange:e.onPreviewModeChange}),"Code"),a.a.createElement("label",null,a.a.createElement("input",{id:"html",value:"html",name:"preview-mode",type:"radio",checked:"html"===n,onChange:e.onPreviewModeChange}),"HTML"))),a.a.createElement(S.a,{height:"calc(".concat("code"===n?100:50,"vh - 80px)"),width:t?"50vw":"100vw",mode:"javascript",theme:"tomorrow",readOnly:!0,fontSize:14,showGutter:!0,name:"preview",value:e.state.error||e.state.transpiled,editorProps:ie,tabSize:2,showLineNumbers:!0,setOptions:oe}),a.a.createElement("div",{ref:e.onIframeRef}))))})}}]),n}(r.Component);var le=Object(y.a)(ce),ue=(t(548),function(e){function n(){return Object(s.a)(this,n),Object(l.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement(p.a,{basename:"/damu"},a.a.createElement(d.a,null,a.a.createElement(a.a.Fragment,null,a.a.createElement(f.a,{path:"/",exact:!0,component:b}),a.a.createElement(f.a,{path:"/repl",exact:!0,component:le}))))}}]),n}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},79:function(e,n){e.exports={"01 simple":"import React from 'react';\nimport ReactDOM from 'react-dom';\n\nReactDOM.render(\n  <h1 id=\"title\" height={54}>\n    Hello world\n  </h1>,\n  document.querySelector('#app')\n);\n","02 fragment":"import React from 'react';\nimport ReactDOM from 'react-dom';\n\nReactDOM.render(\n  <>\n    <h2>The Damu-Madu Project</h2>\n    <p>\n      The Damu-Madu sister project aims to bring the developer experience of\n      writing JSX (XML in JavaScript) without having to use React.\n    </p>\n    <p>\n      JSX is independent of React, you don't have to use React just to use JSX\n      in your development process.\n    </p>\n    <p>\n      The Damu-Madu sister project contains solution for both client render and\n      server render:\n    </p>\n    <ul>\n      <li>\n        <a href=\"https://github.com/tanhauhau/madu\">madu</a> - Writing jsx as if\n        html string\n      </li>\n      <li>\n        <a href=\"https://github.com/tanhauhau/damu\">damu</a> - Converts jsx to\n        vanilla javascript\n      </li>\n    </ul>\n  </>,\n  document.querySelector('#app')\n);\n","03 list":'import React from \'react\';\nimport ReactDOM from \'react-dom\';\n\nReactDOM.render(\n  <div className="body">\n    <h1 className="header">You shall not pass</h1>\n    <ul>\n      <li id="frodo">Frodo Baggins</li>\n      <li id="samwise">Samwise Gamgee</li>\n      <li id="gandalf">Gandalf the Grey</li>\n      <li id="legolas">Legolas</li>\n      <li id="gimli">Gimli</li>\n      <li id="aragorn">Aragorn</li>\n      <li id="boromir">Boromir</li>\n      <li id="meriadoc">Meriadoc</li>\n      <li id="peregrin">Peregrin</li>\n    </ul>\n  </div>,\n  document.querySelector(\'#app\')\n);\n',"04 map":"import React from 'react';\nimport ReactDOM from 'react-dom';\n\nconst buyers = [\n  {\n    firstName: 'James',\n    lastName: 'Steven',\n    followers: [{ firstName: 'James', lastName: 'Steven' }],\n  },\n  {\n    firstName: 'James',\n    lastName: 'Steven',\n    followers: [\n      { firstName: 'James', lastName: 'Steven' },\n      { firstName: 'James', lastName: 'Steven' },\n    ],\n  },\n  {\n    firstName: 'James',\n    lastName: 'Steven',\n    followers: [\n      { firstName: 'James', lastName: 'Steven' },\n      { firstName: 'James', lastName: 'Steven' },\n      { firstName: 'James', lastName: 'Steven' },\n    ],\n  },\n  {\n    firstName: 'James',\n    lastName: 'Steven',\n    followers: [\n      { firstName: 'James', lastName: 'Steven' },\n      { firstName: 'James', lastName: 'Steven' },\n      { firstName: 'James', lastName: 'Steven' },\n      { firstName: 'James', lastName: 'Steven' },\n    ],\n  },\n];\n\nReactDOM.render(\n  <ul>\n    {buyers.map(buyer => (\n      <li>\n        {buyer.firstName + ' - ' + buyer.lastName}\n        {buyer.followers.map((follower, index) => (\n          <>\n            <li>\n              {index + '. ' + follower.firstName + ' - ' + follower.lastName}\n            </li>\n            <li className=\"hidden\">{index % 2 == 0 ? 'odd' : 'even'}</li>\n          </>\n        ))}\n      </li>\n    ))}\n  </ul>,\n  document.querySelector('#app')\n);\n","05 events":"import React from 'react';\nimport ReactDOM from 'react-dom';\n\nReactDOM.render(\n  <div\n    style={{\n      cursor: 'pointer',\n      padding: 10,\n      border: '1px solid black',\n      display: 'inline-block',\n    }}\n    onClick={() => {\n      alert('Hello Damu!');\n    }}\n  >\n    Click Me\n  </div>,\n  document.querySelector('#app')\n);\n","06 component":"import React from 'react';\nimport ReactDOM from 'react-dom';\n\nclass CounterApp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      counter: 0,\n    };\n  }\n\n  onIncrement = () => {\n    this.setState({ counter: this.state.counter + 1 });\n  };\n  onDecrement = () => {\n    this.setState({ counter: this.state.counter - 1 });\n  };\n\n  render() {\n    return (\n      <div>\n        <div>{'counter: ' + this.state.counter}</div>\n        <button onClick={this.onIncrement}>+</button>\n        <button onClick={this.onDecrement}>-</button>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(<CounterApp />, document.querySelector('#app'));\n"}}},[[223,2,1]]]);
//# sourceMappingURL=main.9bf29fc0.chunk.js.map