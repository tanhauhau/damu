(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{215:function(e,t,n){e.exports=n(539)},220:function(e,t,n){},24:function(e,t,n){e.exports={App:"_3HGgo8YmsRzzR-43XGuiVo",navbar:"gBnLqs9WpuhQyk5qcuBFE",brand:"_1ANlngfxtlZL_wfXyTiiOt",preview:"_1g_0nYQynQCg9NHI5earA",previewDashboard:"_2dc8blJjyeHHcxcYajKPbp","preview-html":"_2I0726fxMFLvUluQZyK_h2","preview-both":"_1XiMwV8qMU22Ph0eS3Pi0D","preview-code":"_8wfWpLf3i2rFaC1LnaJXO"}},46:function(e,t,n){e.exports={App:"_2MqrEPH7wRGTUnAVXplCQU",title:"_24SQRvaGQXqT_X5Wyx2Ndf",subtitle:"m60etY5PtB6SdZqnydOx6",button:"_36HiqEt255U7c_x1fj-oiL"}},537:function(e,t,n){},539:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(211),o=n.n(i),s=(n(220),n(69)),l=n(70),c=n(72),m=n(71),u=n(73),p=n(541),d=n(542),f=n(543),h=n(540),v=n(46),g=n.n(v);function b(){return a.a.createElement("div",{className:g.a.App},a.a.createElement("div",null,a.a.createElement("h1",{className:g.a.title},"Damu"),a.a.createElement("h2",{className:g.a.subtitle},"A React Compiler"),a.a.createElement(h.a,{to:"/repl"},a.a.createElement("button",{className:g.a.button},"REPL"))))}var y,E=n(544),w=n(113),x=n.n(w),S=(n(77),n(231),n(232),n(234),n(67)),N=n(114),C=n(212),D=n.n(C),j=n(112),M=n(0),_=n(68),J=(y="\nfunction __damu__appendChildren(parent, children) {\n  children = Array.isArray(children) ? children : [children];\n  children.forEach(function(child) {\n    parent.appendChild(child);\n  });\n}\n",Object(_.parseSync)(y).program.body[0]);var O={APPEND_CHILDREN:Symbol("__has_appendChildren__")},R=Object(j.declare)(function(e,t){return e.assertVersion(7),{name:"babel-transform-damu-plugin",inherits:D.a,visitor:{JSXElement:function(e){var t=A(e),n=t.identifier,r=t.statements;e.replaceWith(n),r.forEach(function(t){T(e,t)})},JSXFragment:function(e){var t,n=e.get("children").filter(U).map(function(e){return k(e)}).reduce(function(e,t){var n,r=t.identifier,a=t.statements;return e.identifiers.push(r),(n=e.statements).push.apply(n,Object(N.a)(a)),e},{identifiers:[],statements:[]}),r=n.identifiers,a=n.statements;e.replaceWith((t=r,M.arrayExpression(t))),a.forEach(function(t){T(e,t)})},CallExpression:{enter:function(e){["ArrowFunctionExpression","FunctionExpression"].includes(e.get("arguments.0.type").node)&&P(e.get("arguments.0.body"))},exit:function(e){if((a=e.node).callee&&"MemberExpression"===a.callee.type&&a.callee.object&&"Identifier"===a.callee.object.type&&"ReactDOM"===a.callee.object.name&&"Identifier"===a.callee.property.type&&"render"===a.callee.property.name){var t=e.node.arguments,n=t[0],r=t[1];e.replaceWith(X(r,n,e))}var a}},ImportDeclaration:function(e){["react","react-dom"].includes(e.node.source.value)&&e.remove()},Program:{exit:function(e){[e.scope.bindings.React,e.scope.bindings.ReactDOM].forEach(function(e){e&&e.path.remove()}),e[O.APPEND_CHILDREN]&&e.pushContainer("body",J)}}}}});function k(e,t){switch(e.node.type){case"JSXElement":return A(e,t);case"JSXText":case"StringLiteral":return function(e,t){var n=e.scope.generateUidIdentifier("text"),r=[I(n,M.stringLiteral(e.node.value))];t&&r.push(X(t,n,e));return{identifier:n,statements:r}}(e,t);case"JSXExpressionContainer":return function(e,t){switch(console.log(e),e.node.expression.type){case"BinaryExpression":return function(e,t){var n=e.scope.generateUidIdentifier("result"),r=[I(n,e.node)];t&&r.push(X(t,n,e));return{identifier:n,statements:r}}(e.get("expression"),t);case"CallExpression":return function(e,t){if(n=e.node,n.callee&&"MemberExpression"===n.callee.type&&n.callee.property&&"Identifier"===n.callee.property.type&&"map"===n.callee.property.name&&n.arguments&&1===n.arguments.length&&["FunctionExpression","ArrowFunctionExpression"].includes(n.arguments[0].type))return function(e,t){if(P(e.get("arguments.0.body")),t){e.get("callee.property").replaceWith(M.identifier("forEach"));var n=e.get("arguments.0.body.body"),r=n.find(function(e){return"ReturnStatement"===e.node.type});r&&r.replaceWith(X(t,r.node.argument,e));var a=[M.expressionStatement(e.node)];return{identifier:null,statements:a}}var i=e.scope.generateUidIdentifier("lists"),o=[L(i,e.node)];return{identifier:i,statements:o}}(e,t);var n;var r=e.scope.generateUidIdentifier("result"),a=[L(r,e.node)];t&&a.push(X(t,r,e));return{identifier:r,statements:a}}(e.get("expression"),t);case"LogicalExpression":return function(e,t){switch(e.node.operator){case"&&":return function(e,t){var n=e.scope.generateUidIdentifier("result"),r=k(e.get("right"),t),a=[F(e.node.left,r.statements)];return{identifier:n,statements:a}}(e,t);case"||":return function(e,t){var n=e.scope.generateUidIdentifier("result"),r=k(e.get("left"),t),a=k(e.get("right"),t),i=[F(e.node.left,r.statements,a.statements)];return{identifier:n,statements:i}}(e,t)}throw new Error("Unknown logical operator: "+e.node.operator)}(e.get("expression"),t);case"ConditionalExpression":return function(e,t){var n=e.scope.generateUidIdentifier("result"),r=k(e.get("consequent"),t),a=k(e.get("alternate"),t),i=[F(e.node.test,r.statements,a.statements)];return{identifier:n,statements:i}}(e.get("expression"),t);default:return k(e.get("expression"),t)}throw new Error("Unknown expression type: "+e.node.expression.type)}(e,t);case"Identifier":case"MemberExpression":return function(e,t){var n=e.node,r=t?[X(t,n,e)]:[];return{identifier:n,statements:r}}(e,t);default:throw new Error("Unknown element type: "+e.node.type)}}function A(e,t){var n=function e(t){switch(t.type){case"JSXMemberExpression":return e(t.object)+"."+e(t.property);case"JSXIdentifier":return t.name;default:throw new Error("Unknown type: "+t.type)}}(e.node.openingElement.name),r=e.scope.generateUidIdentifier(n),a=[],i=function(e,t){return L(e,M.callExpression(M.memberExpression(M.identifier("document"),M.identifier("createElement")),[M.stringLiteral(t)]))}(r,n);return a.push(i),e.node.openingElement.attributes.map(function(e){return function(e,t,n){var r="JSXExpressionContainer"===n.type?n.expression:n;return M.expressionStatement(M.callExpression(M.memberExpression(e,M.identifier("setAttribute")),[M.stringLiteral(t),r]))}(r,e.name.name,e.value)}).forEach(function(e){return a.push(e)}),e.get("children").filter(U).map(function(e){return k(e,r)}).map(function(e){return e.statements}).forEach(function(e){return a.push.apply(a,Object(N.a)(e))}),t&&a.push(X(t,r,e)),{identifier:r,statements:a}}function P(e){return"BlockStatement"!==e.node.type&&e.replaceWith(M.blockStatement([M.returnStatement(e.node)])),e}function I(e,t){return L(e,M.callExpression(M.memberExpression(M.identifier("document"),M.identifier("createTextNode")),[t]))}function L(e,t){return M.variableDeclaration("const",[M.variableDeclarator(e,t)])}function X(e,t,n){return(function(e){return e.findParent(function(e){return e.isProgram()})}(n))[O.APPEND_CHILDREN]=!0,M.expressionStatement(M.callExpression(M.identifier("__damu__appendChildren"),[e,t]))}function U(e){return!("JSXText"===e.node.type&&""===e.node.value.trim())}function F(e,t,n){var r=t?Array.isArray(t)?t:[t]:[],a=n?Array.isArray(n)?n:[n]:[];return M.ifStatement(e,M.blockStatement(r),n?M.blockStatement(a):null)}function T(e,t){var n=e.scope.path;switch(n.node.type){case"ArrowFunctionExpression":case"FunctionExpression":case"FunctionDeclaration":n=n.get("body")}for(var r=n.get("body"),a=e;a&&!r.includes(a);)a=a.parentPath;a?a.insertBefore(t):n.unshiftContainer("body",t)}var W=n(76),q=n.n(W),B=n(24),G=n.n(B),H=Object.keys(q.a),Q={$blockScrolling:!0},z={useWorker:!1};function V(e){return e=decodeURIComponent(e.slice(1)),H.includes(e)?e:"01 simple"}var Y=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).onChange=function(e){n.setState({value:e,error:null}),n.transpile(e)},n.onChangeTemplate=function(e){n.props.history.replace(n.props.location.pathname+"#"+e.currentTarget.value)},n.onChangeDemo=function(e){var t=q.a[e];n.setState({selectedDemo:e,value:t,error:null}),n.transpile(t)},n.onPreviewModeChange=function(e){n.setState({previewMode:e.currentTarget.value})},n.transpile=function(e){S.transformAsync(e,{plugins:[R]}).then(function(e){var t;if(n.setState({transpiled:(t=e.code,t.split("\n").filter(function(e){return""!==e.trim()}).map(function(e){return/^[\s\t]*(const|document|if|function)/.test(e)?"\n"+e:e}).join("\n").trim())}),n.iframe){for(;n.iframe.firstChild;)n.iframe.removeChild(n.iframe.firstChild);var r=document.createElement("iframe");n.iframe.appendChild(r);var a=r.contentDocument||r.contentWindow.document;a.open(),a.write(function(e){return'<html>\n    <body>\n      <div id="app" />\n    </body>\n    <script type="text/javascript">'.concat(e,"<\/script>\n  </html>")}(e.code)),a.close()}}).catch(function(e){if(console.error(e),n.setState({transpiled:"",error:e.message}),n.iframe)for(;n.iframe.firstChild;)n.iframe.removeChild(n.iframe.firstChild)})},n.onIframeRef=function(e){n.iframe=e};var r=V(e.location.hash);return n.state={value:q.a[r],selectedDemo:r,transpiled:"",error:null,previewMode:"both"},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.transpile(this.state.value)}},{key:"componentDidUpdate",value:function(e){e.location.hash!==this.props.location.hash&&this.onChangeDemo(V(this.props.location.hash))}},{key:"render",value:function(){var e=this.state.previewMode;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:G.a.navbar},a.a.createElement(h.a,{to:"/",className:G.a.brand},"Damu"),a.a.createElement("label",null,"Demo: ",a.a.createElement("select",{onChange:this.onChangeTemplate,value:this.state.selectedDemo},H.map(function(e){return a.a.createElement("option",{key:e,value:e},e)}))),a.a.createElement("a",{target:"_blank",rel:"noreferrer noopener",href:"https://github.com/tanhauhau/damu"},"View it on Github")),a.a.createElement("div",{className:G.a.App},a.a.createElement(x.a,{height:"calc(100vh - 50px)",width:"50vw",mode:"jsx",theme:"tomorrow",fontSize:14,onChange:this.onChange,showGutter:!0,name:"editor",value:this.state.value,editorProps:Q,tabSize:2,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,showLineNumbers:!0}),a.a.createElement("div",{className:G.a.preview+" "+G.a["preview-"+e]},a.a.createElement("div",{className:G.a.previewDashboard},a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement("input",{id:"both",value:"both",name:"preview-mode",type:"radio",checked:"both"===e,onChange:this.onPreviewModeChange}),"Both"),a.a.createElement("label",null,a.a.createElement("input",{id:"code",value:"code",name:"preview-mode",type:"radio",checked:"code"===e,onChange:this.onPreviewModeChange}),"Code"),a.a.createElement("label",null,a.a.createElement("input",{id:"html",value:"html",name:"preview-mode",type:"radio",checked:"html"===e,onChange:this.onPreviewModeChange}),"HTML"))),a.a.createElement(x.a,{height:"calc(".concat("code"===e?100:50,"vh - 80px)"),width:"50vw",mode:"javascript",theme:"tomorrow",readOnly:!0,fontSize:14,showGutter:!0,name:"preview",value:this.state.error||this.state.transpiled,editorProps:Q,tabSize:2,showLineNumbers:!0,setOptions:z}),a.a.createElement("div",{ref:this.onIframeRef}))))}}]),t}(r.Component);var Z=Object(E.a)(Y),K=(n(537),function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(p.a,{basename:"/damu"},a.a.createElement(d.a,null,a.a.createElement(a.a.Fragment,null,a.a.createElement(f.a,{path:"/",exact:!0,component:b}),a.a.createElement(f.a,{path:"/repl",exact:!0,component:Z}))))}}]),t}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},76:function(e,t){e.exports={"01 simple":"import React from 'react';\nimport ReactDOM from 'react-dom';\n\nReactDOM.render(\n  <h1 id=\"title\" height={54}>\n    Hello world\n  </h1>,\n  document.querySelector('#app')\n);\n","02 fragment":"import React from 'react';\nimport ReactDOM from 'react-dom';\n\nReactDOM.render(\n  <>\n    <h2>The Damu-Madu Project</h2>\n    <p>\n      The Damu-Madu sister project aims to bring the developer experience of\n      writing JSX (XML in JavaScript) without having to use React.\n    </p>\n    <p>\n      JSX is independent of React, you don't have to use React just to use JSX\n      in your development process.\n    </p>\n    <p>\n      The Damu-Madu sister project contains solution for both client render and\n      server render:\n    </p>\n    <ul>\n      <li>\n        <a href=\"https://github.com/tanhauhau/madu\">madu</a> - Writing jsx as if\n        html string\n      </li>\n      <li>\n        <a href=\"https://github.com/tanhauhau/damu\">damu</a> - Converts jsx to\n        vanilla javascript\n      </li>\n    </ul>\n  </>,\n  document.querySelector('#app')\n);\n","03 list":'import React from \'react\';\nimport ReactDOM from \'react-dom\';\n\nReactDOM.render(\n  <div className="body">\n    <h1 className="header">You shall not pass</h1>\n    <ul>\n      <li id="frodo">Frodo Baggins</li>\n      <li id="samwise">Samwise Gamgee</li>\n      <li id="gandalf">Gandalf the Grey</li>\n      <li id="legolas">Legolas</li>\n      <li id="gimli">Gimli</li>\n      <li id="aragorn">Aragorn</li>\n      <li id="boromir">Boromir</li>\n      <li id="meriadoc">Meriadoc</li>\n      <li id="peregrin">Peregrin</li>\n    </ul>\n  </div>,\n  document.querySelector(\'#app\')\n);\n',"04 map":"import React from 'react';\nimport ReactDOM from 'react-dom';\n\nconst buyers = [\n  {\n    firstName: 'James',\n    lastName: 'Steven',\n    followers: [{ firstName: 'James', lastName: 'Steven' }],\n  },\n  {\n    firstName: 'James',\n    lastName: 'Steven',\n    followers: [\n      { firstName: 'James', lastName: 'Steven' },\n      { firstName: 'James', lastName: 'Steven' },\n    ],\n  },\n  {\n    firstName: 'James',\n    lastName: 'Steven',\n    followers: [\n      { firstName: 'James', lastName: 'Steven' },\n      { firstName: 'James', lastName: 'Steven' },\n      { firstName: 'James', lastName: 'Steven' },\n    ],\n  },\n  {\n    firstName: 'James',\n    lastName: 'Steven',\n    followers: [\n      { firstName: 'James', lastName: 'Steven' },\n      { firstName: 'James', lastName: 'Steven' },\n      { firstName: 'James', lastName: 'Steven' },\n      { firstName: 'James', lastName: 'Steven' },\n    ],\n  },\n];\n\nReactDOM.render(\n  <ul>\n    {buyers.map(buyer => (\n      <li>\n        {buyer.firstName + ' - ' + buyer.lastName}\n        {buyer.followers.map((follower, index) => (\n          <>\n            <li>\n              {index + '. ' + follower.firstName + ' - ' + follower.lastName}\n            </li>\n            <li className=\"hidden\">{index % 2 == 0 ? 'odd' : 'even'}</li>\n          </>\n        ))}\n      </li>\n    ))}\n  </ul>,\n  document.querySelector('#app')\n);\n"}}},[[215,2,1]]]);
//# sourceMappingURL=main.310fe692.chunk.js.map